---
title: rust struct
date: 2023-10-28 13:06:28
permalink: /pages/b1bfa8/
categories:
  - å­¦ä¹ ç¬”è®°
  - rust
tags:
  - rust
author: 
  name: huanggaoqing
  link: https://github.com/huanggaoqing
---

<div style="text-align: center;" align="center" >
  <img src="https://rustacean.net/assets/rustacean-flat-gesture.svg" width="300px" />
</div>

## struct

### åˆ›å»º/ä½¿ç”¨è¯­æ³•

#### åˆ›å»ºç»“æž„ä½“

```rust
struct User<'a> {
  name: &'a str,
  age: i32,
  email: &'a str
}
```

#### å®žä¾‹åŒ–ç»“æž„ä½“

```rust
let user = User {
  name: "HGQ",
  age: 21,
  email: "huanggaoqing0119@gmail.com"
};
```

### æ›´æ–°è¯­æ³•

#### æ›´æ”¹æŸä¸ªå­—æ®µ

::: warning æƒ³è¦æ›´æ”¹ç»“æž„ä½“å­—æ®µçš„è¯ï¼Œç»“æž„ä½“å¿…é¡»æ˜¯å¯ä»¥å˜çš„ã€‚

```rust
let mut user = User {
  name: "HGQ",
  age: 21,
  email: "huanggaoqing0119@gmail.com"
};
```

:::

```rust
user.email = "huanggaoqing0302@gmail.com";
```

#### æ ¹æ®æŸä¸ªç»“æž„ä½“åˆ›å»ºæ–°çš„ç»“æž„ä½“

åªæœ‰`email`å­—æ®µæ”¹å˜äº†ï¼Œå…¶ä»–å­—æ®µéƒ½é€‚ç”¨`user`ç»“æž„ä½“çš„

```rust
let user2 = User {
  email: "huanggaoqing0302@gmail.com",
  ..user
};
```

## Tuple struct

### åˆ›å»º/ä½¿ç”¨

```rust
struct Color (i32, i32, i32);
```

```rust
let color = Color(0, 0, 0);
```

## ðŸŒ° å°ä¾‹å­

### æ±‚é•¿æ–¹å½¢çš„é¢ç§¯

1. ç¬¬ä¸€ç§æ–¹å¼ï¼š

```rust
let w = 16;
let h = 6;
println!("area: {}", area(w, h))
fn area(w: i32, h: i32) -> i32 {
  w * h
}
```

è¿™ç§æ–¹å¼ä¸å¥½ï¼ŒåŽŸå› æ˜¯é•¿æ–¹å½¢çš„é•¿å®½åº”è¯¥å­˜åœ¨è”ç³»çš„ï¼ŒçŽ°åœ¨è¿™ç§æ–¹å¼ï¼Œé•¿å’Œå®½åªæ˜¯ä¸¤ä¸ªç‹¬ç«‹çš„å˜é‡ï¼Œæ²¡æœ‰ä»»ä½•è”ç³» 2. ç¬¬äºŒç§æ–¹å¼ï¼š

```rust
let rect = Rect {
  width: 16,
  height: 6
};
println!("area: {}", area(&rect))

fn area(r: &Rect) -> i32 {
  r.width * r.height
}
```

ä½¿ç”¨ç»“æž„ä½“å°†é•¿å’Œå®½å°è£…åˆ°ä¸€èµ·ï¼Œå°±å¯ä»¥è®©ä»–ä»¬äº§ç”Ÿè”ç³»ï¼Œå¹¶æˆä¸ºä¸€ä½“ã€‚

## struct æ–¹æ³•

### ä½¿ç”¨æ–¹æ³•æ”¹è¿›ä¸Šé¢ä¾‹å­

- åœ¨ `impl` å—ä¸­å®šä¹‰æ–¹æ³•
- `impl` å—å¯ä»¥å†™å¤šä¸ª
- æ–¹æ³•ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ &self æ‰§è¡Œçš„æ˜¯å®žä¾‹æœ¬èº«ï¼Œä¹Ÿå¯ä»¥èŽ·å¾—å®žä¾‹æœ¬èº«çš„æ‰€æœ‰æƒï¼ˆselfï¼‰æˆ–å¯å˜å¼•ç”¨ï¼ˆ& mut selfï¼‰
    
    ::: tip
     èŽ·å–å¯å˜å¼•ç”¨æ—¶ï¼Œå®žä¾‹æœ¬èº«ä¹Ÿè¦æ˜¯å¯å˜çš„ï¼Œè¿™æ ·æ‰å¯ä»¥ä¿®æ”¹å®žä¾‹æœ¬èº«çš„å€¼
    :::
    
- æ–¹æ³•æƒ³è¦ä¼ é€’å‚æ•°ï¼Œç›´æŽ¥åœ¨&selfåŽé¢å¢žåŠ å°±å¯ä»¥

```rust
struct Rect {
  width: i32,
  height: i32
}
// æ–¹æ³•å£°æ˜Žå’Œå®šä¹‰
impl Rect {
	// æ— å‚æ•°
  fn area(&self) -> i32 {
    self.width * self.height
  }
	// æœ‰å‚æ•°
	fn can_hold(&self, other: &Rect) -> bool {
    self.width >= other.width && self.height >= other.height
  }
}

// æ–¹æ³•è°ƒç”¨
println!("area: {}", rect.area())

// æœ‰å‚æ•°æ–¹æ³•è°ƒç”¨
let rect2 = Rect {
  width: 10,
  height: 3
};
println!("can: {}", rect.can_hold(&rect2))
```

è¿™æ ·å°±å¯ä»¥æŠŠæ±‚é•¿æ–¹å½¢é¢ç§¯çš„æ–¹æ³•å’Œé•¿æ–¹å½¢çš„ç»“æž„ä½“å…³è”èµ·æ¥ï¼Œæ›´åŠ çš„åˆä¹Žé€»è¾‘ã€‚

## structå…³è”å‡½æ•°ï¼ˆstaticï¼‰

::: tip

ç›¸å½“äºŽæ˜¯é™æ€æ–¹æ³•

:::

```rust
// åˆ›å»º
struct Rect {
  width: i32,
  height: i32
}
impl Rect {
  fn new(width: i32, height: i32) -> Rect {
    Rect {
      width,
      height
    }
}

// ä½¿ç”¨
let rect = Rect::new(16, 6);
let rect2 = Rect::new(10, 3);
```
